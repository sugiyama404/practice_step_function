#!/usr/bin/env bash

set -euo pipefail

function create_sns_email_file() {
  local cwd="$1"
  cd "${cwd}"

  # infra/modules/sns/src ディレクトリが存在することを確認する
  if [ ! -d "infra/modules/sns/src" ]; then
    mkdir -p infra/modules/sns/src
  fi

  # ユーザーにメールアドレスの入力を促す
  read -r -p "メールアドレスを入力してください: " email

  # メールアドレスをファイルに書き込む
  echo "$email" >infra/modules/sns/src/email.txt

  echo "メールアドレスが infra/modules/sns/src/email.txt に保存されました。"

}

function main() {
  local cwd
  cwd="$(cd "$(dirname "$0")/.." && pwd)"
  create_sns_email_file "${cwd}"
}

if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
  main "$@"
fi
